# Volumes в Kubernetes - Часть 1. Сравнение Docker storage driver: overlay2 и volume: emptyDir

Volumes предназначены для сохранения информации между созданиями и удалениями подов. Создадим простой volume типа
emptyDir.

В этом деплойменте поднимем два контейнера к которым привяжем volume типа emptyDir

- emptyDir volume - является самым простым типом volume выделит определенную директорию на ноде куда и будет записывать
  данные с контейнеров.

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuber
  labels:
    app: kuber
spec:
  replicas: 3
  selector:
    matchLabels:
      app: http-server
  template:
    metadata:
      labels:
        app: http-server
    spec:
      containers:
        - name: kuber-app-1
          image: bakavets/kuber
          ports:
            - containerPort: 8000
          volumeMounts: # Volume первого контейнера 
            - mountPath: /cache-1 # Путь где он будет располагаться
              name: cache-volume # Имя, должно совпадать с одним из имен в секции volumes
        - name: nginx
          image: nginx
          ports:
            - containerPort: 80
          volumeMounts: # Создаем volume 
            - mountPath: /cache-2 # Путь где он будет располагаться
              name: cache-volume # Задаем имя volume должно совпадать с одним из имен в секции volumes
              subPath: data # говорит о том что маунтить надо не в рут директорию, а в эту, то есть путь будет /data/cache-2
      volumes:
        - name: cache-volume # Объявляем Volume задавая ему имя
          emptyDir: { } # и тип emptyDir.
```

Теперь посмотрим где же на надо храниться этот emptyDir, для этого на ноде надо перейти по пути

    cd ~/var/lib/kublet/pods/

и затем выполнив команду для просмотра директорий

    ls -la 

мы увидим вот такой вывод с папками чье название совпадает с uuid запущенных подов

![img.png](img.png)

взяв ид третьего пода в списке мы можем перейти его в директорию при помощи команды

    cd [uuid] 

затем просмотрим список директорий

    ls -la 

![img_1.png](img_1.png)

перейдем в volumes и просмотрим директории в ней

![img_2.png](img_2.png)

как видим там есть наш emptyDir

## WARN

Не стоит указывать в качестве директории для сохранения папку с данными, так как Kubernetes перед сохранением очищает
указанную директорию.



