# Deployment в Kubernetes. Стратегии обновления приложений

## Deployment

Deployment ресурс высокого уровня предназначенный для развертывания приложений и их обновления, под капотом он
использует ReplicaSet для управления подами, фактически осуществляя управление ReplicaSet объектами, которая в свою
очередь управляет подами.

Создадим базовый деплоймент при помощи командной строки

    kubectl create deployment kuber-ctl-app --image=bakavets/kuber --port=8000 --replicas=3

Теперь поменяем тег для контейнера который используют наши поды, как бы подсунув ему новую версию приложения

    kubectl set image deployment/kuber-ctl-app kuber=bakavets/kuber:0.1 --record
                                                 ^
                           название контейнера его можно посмотреть выполнив 
                           команду "kubectl get deployment kuber-ctl-app -o yaml"           
                           и проверить поле | spec:          |  
                                            |  containers:   |
                                            |    name: kuber |

    --record - создаст историю ревизий это нужно 

И как мы увидим произойдет следующее:

- Deployment создаст новую ReplicaSet с новой версией приложения
- Старая ReplicaSet начнет постепенно останавливаться и ее поды удаляться
- Поды новой ReplicaSet будут создаваться в нужном количестве

